# CSV Splitter - æ™ºèƒ½CSVæ–‡ä»¶æ‹†åˆ†å·¥å…·

> æŒ‰å­—æ®µå†…å®¹ã€æ—¶é—´å‘¨æœŸã€è¡Œæ•°æ™ºèƒ½æ‹†åˆ†å¤§å‹CSVæ–‡ä»¶

## ç‰ˆæœ¬ä¿¡æ¯

**å½“å‰ç‰ˆæœ¬**: v2.2.0

## åŠŸèƒ½ç‰¹æ€§

### ä½¿ç”¨æ–¹å¼
- âœ… **å›¾å½¢ç•Œé¢ (GUI)** - PyQt6 å›¾å½¢ç•Œé¢ï¼Œæ“ä½œç®€å•ç›´è§‚
- âœ… **å‘½ä»¤è¡Œ (CLI)** - é€‚åˆè‡ªåŠ¨åŒ–è„šæœ¬å’Œæ‰¹å¤„ç†

### æ‹†åˆ†æ¨¡å¼
- âœ… **æŒ‰å­—æ®µæ‹†åˆ†** - æ ¹æ®å­—æ®µå†…å®¹æ‹†åˆ†æ–‡ä»¶
  - å•å­—æ®µæ‹†åˆ†
  - å¤šå­—æ®µçº§è”æ‹†åˆ†
  - å­—æ®µ + æ—¶é—´ç»„åˆæ‹†åˆ†
- âœ… **æŒ‰è¡Œæ•°æ‹†åˆ†** - ç›´æ¥æŒ‰æŒ‡å®šè¡Œæ•°æ‹†åˆ†ï¼ˆæ— éœ€é€‰æ‹©å­—æ®µï¼‰
  - é€‚åˆå¤§æ–‡ä»¶å¿«é€Ÿæ‹†åˆ†
  - å¯è‡ªå®šä¹‰è¡Œæ•°é™åˆ¶

### æ—¶é—´å‘¨æœŸæ”¯æŒ
| å‘¨æœŸ | å‚æ•° | è¯´æ˜ | è¾“å‡ºç¤ºä¾‹ |
|-----|------|------|---------|
| å¹´ | Y | æŒ‰å¹´ä»½æ‹†åˆ† | `sample_2024.csv` |
| åŠå¹´ | H | æŒ‰åŠå¹´æ‹†åˆ† | `sample_2024-H1.csv`, `sample_2024-H2.csv` |
| å­£åº¦ | Q | æŒ‰å­£åº¦æ‹†åˆ† | `sample_2024-Q1.csv` ~ `sample_2024-Q4.csv` |
| æœˆ | M | æŒ‰æœˆä»½æ‹†åˆ†ï¼ˆé»˜è®¤ï¼‰ | `sample_2024-01.csv` ~ `sample_2024-12.csv` |
| åŠæœˆ | HM | æŒ‰åŠæœˆæ‹†åˆ† | `sample_2024-01-HM1.csv`, `sample_2024-01-HM2.csv` |
| æ—¥ | D | æŒ‰æ—¥æœŸæ‹†åˆ† | `sample_2024-01-15.csv` |

### æ—¥æœŸæ ¼å¼æ”¯æŒ
| æ ¼å¼ | ç¤ºä¾‹ |
|-----|------|
| yyyyMM | 202401 |
| yyyy-MM | 2024-01 |
| yyyyMMdd | 20240115 |
| yyyy-MM-dd | 2024-01-15 |
| yyyy/MM/dd | 2024/01/15 |
| yyyy-M-d | 2024-1-15, 2024-12-5 |
| yyyy/M/d | 2024/1/15, 2024/12/5 |
| yyyyMMdd HH:mm:ss | 20240115 14:30:00 |
| yyyy-MM-dd HH:mm:ss | 2024-01-15 14:30:00 |
| yyyy/MM/dd HH:mm:ss | 2024/01/15 14:30:00 |
| yyyy-M-d HH:mm:ss | 2024-1-15 14:30:06 |
| yyyy/M/d HH:mm:ss | 2024/1/15 14:30:06 |
| yyyy-MM-dd HH:mm | 2024-01-15 14:30 |
| yyyy/MM/dd HH:mm | 2024/01/15 14:30 |
| yyyy-M-d HH:mm | 2024-1-15 14:30 |
| yyyy/M/d HH:mm | 2024/1/15 14:30 |

### å…¶ä»–åŠŸèƒ½
- âœ… å¤§æ–‡ä»¶è‡ªåŠ¨äºŒæ¬¡æ‹†åˆ†ï¼ˆå¯è‡ªå®šä¹‰è¡Œæ•°ï¼Œ1-1000ä¸‡è¡Œï¼‰
- âœ… å•æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ‰¹é‡å¤„ç†
- âœ… è‡ªåŠ¨ç¼–ç æ£€æµ‹
- âœ… é€’å½’å¤„ç†å­æ–‡ä»¶å¤¹
- âœ… è¿›åº¦æ˜¾ç¤ºä¸è¯¦ç»†æ—¥å¿—
- âœ… æ™ºèƒ½å­—æ®µç±»å‹è¯†åˆ«ï¼ˆæ—¥æœŸå­—æ®µè‡ªåŠ¨æ ‡è®°ï¼‰

## å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/junstudys/split_csv_by_field
cd split_csv_by_field

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

## å¿«é€Ÿå¼€å§‹

### GUI æ¨¡å¼ï¼ˆæ¨èï¼‰

```bash
python gui_main.py
```

GUI æ¨¡å¼æä¾›å¯è§†åŒ–æ“ä½œç•Œé¢ï¼Œæ”¯æŒï¼š
- æ‹†åˆ†ç±»å‹é€‰æ‹©ï¼ˆæŒ‰å­—æ®µ / æŒ‰è¡Œæ•°ï¼‰
- å­—æ®µæ™ºèƒ½è¯†åˆ«ä¸é€‰æ‹©
- æ—¶é—´å‘¨æœŸé…ç½®
- å®æ—¶é¢„è§ˆä¸ç¡®è®¤
- è¿›åº¦æ˜¾ç¤ºä¸ç»“æœæŸ¥çœ‹

### CLI æ¨¡å¼

ç¤ºä¾‹æ•°æ®ç»“æ„ (`./data/sample.csv`)ï¼š

```
è®¢å•å·,è®¢å•æ—¥æœŸ,è®¢å•æ—¶é—´,ç»“ç®—æ—¥æœŸ,ç½‘ç‚¹,çœä»½,åŸå¸‚,é‡‘é¢,æ•°é‡,å¤‡æ³¨
ORD00000001,2024-07-30,2024/7/30 11:24,2024/8/9,ç½‘ç‚¹D,ä¸Šæµ·å¸‚,ä¸Šæµ·å¸‚,392.17,89,å¤‡æ³¨ä¿¡æ¯0
ORD00000002,2025-03-27,2025/3/27 11:29,2025/4/6,ç½‘ç‚¹E,ä¸Šæµ·å¸‚,ä¸Šæµ·å¸‚,927.31,22,å¤‡æ³¨ä¿¡æ¯1
...
```

#### 1. æŸ¥çœ‹æ–‡ä»¶å­—æ®µ

```bash
python csv_splitter.py list-fields --file ./data/sample.csv
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ“‹ æ–‡ä»¶å­—æ®µåˆ—è¡¨
============================================================
æ–‡ä»¶: ./data/sample.csv
ç¼–ç : utf-8

æ€»å­—æ®µæ•°: 10
============================================================
   1. ğŸ“ æ™®é€š | è®¢å•å·                        | æ ·ä¾‹: ORD00000001
   2. ğŸ“… æ—¥æœŸ | è®¢å•æ—¥æœŸ                      | æ ·ä¾‹: 2024-07-30
   3. ğŸ“… æ—¥æœŸ | è®¢å•æ—¶é—´                      | æ ·ä¾‹: 2024/7/30 11:24
   4. ğŸ“… æ—¥æœŸ | ç»“ç®—æ—¥æœŸ                      | æ ·ä¾‹: 2024/8/9
   5. ğŸ“ æ™®é€š | ç½‘ç‚¹                          | æ ·ä¾‹: ç½‘ç‚¹D
   6. ğŸ“ æ™®é€š | çœä»½                          | æ ·ä¾‹: ä¸Šæµ·å¸‚
   7. ğŸ“ æ™®é€š | åŸå¸‚                          | æ ·ä¾‹: ä¸Šæµ·å¸‚
   8. ğŸ“ æ™®é€š | é‡‘é¢                          | æ ·ä¾‹: 392.17
   9. ğŸ“ æ™®é€š | æ•°é‡                          | æ ·ä¾‹: 89
  10. ğŸ“ æ™®é€š | å¤‡æ³¨                          | æ ·ä¾‹: å¤‡æ³¨ä¿¡æ¯0
```

#### 2. æŒ‰çœä»½æ‹†åˆ†

```bash
python csv_splitter.py split --input ./data/sample.csv --split-fields "çœä»½"
```

è¾“å‡ºï¼š`sample_ä¸Šæµ·å¸‚.csv`ã€`sample_æµ™æ±Ÿçœ.csv`ã€`sample_æ²³å—çœ.csv`...

#### 3. æŒ‰æœˆä»½æ‹†åˆ†

```bash
python csv_splitter.py split --input ./data/sample.csv --split-fields "è®¢å•æ—¥æœŸ" --time-period M
```

è¾“å‡ºï¼š`sample_2024-01.csv`ã€`sample_2024-02.csv`...

#### 4. æŒ‰çœä»½ + æœˆä»½ç»„åˆæ‹†åˆ†

```bash
python csv_splitter.py split \
    --input ./data/sample.csv \
    --split-fields "çœä»½,è®¢å•æ—¥æœŸ" \
    --time-period M
```

è¾“å‡ºï¼š`sample_ä¸Šæµ·å¸‚_2024-01.csv`ã€`sample_æµ™æ±Ÿçœ_2024-02.csv`...

#### 5. æŒ‰è¡Œæ•°æ‹†åˆ†ï¼ˆæ— éœ€å­—æ®µï¼‰

```bash
python csv_splitter.py split \
    --input ./data/sample.csv \
    --max-rows 1000
```

è¾“å‡ºï¼š`sample_part1.csv`ï¼ˆ1000è¡Œï¼‰ã€`sample_part2.csv`ï¼ˆ1000è¡Œï¼‰...

#### 6. æŒ‰å­£åº¦æ‹†åˆ†

```bash
python csv_splitter.py split \
    --input ./data/sample.csv \
    --split-fields "è®¢å•æ—¥æœŸ" \
    --time-period Q
```

è¾“å‡ºï¼š`sample_2024-Q1.csv`ã€`sample_2024-Q2.csv`...

#### 7. æŒ‰åŠæœˆæ‹†åˆ†

```bash
python csv_splitter.py split \
    --input ./data/sample.csv \
    --split-fields "è®¢å•æ—¥æœŸ" \
    --time-period HM
```

è¾“å‡ºï¼š`sample_2024-01-HM1.csv`ï¼ˆä¸ŠåŠæœˆï¼‰ã€`sample_2024-01-HM2.csv`ï¼ˆä¸‹åŠæœˆï¼‰...

#### 8. å¤§æ–‡ä»¶äºŒæ¬¡æ‹†åˆ†ï¼ˆæ¯5è¡Œä¸€ä¸ªæ–‡ä»¶ï¼‰

```bash
python csv_splitter.py split \
    --input ./data/sample.csv \
    --split-fields "è®¢å•æ—¥æœŸ" \
    --time-period M \
    --max-rows 5
```

è¾“å‡ºï¼š`sample_2024-01_part1.csv`ï¼ˆ5è¡Œï¼‰ã€`sample_2024-01_part2.csv`ï¼ˆ5è¡Œï¼‰...

#### 9. æ‰¹é‡å¤„ç†æ–‡ä»¶å¤¹

```bash
python csv_splitter.py split \
    --input ./data/ \
    --split-fields "è®¢å•æ—¥æœŸ" \
    --time-period Q \
    --recursive
```

#### 10. æŒ‰çœä»½å’ŒåŸå¸‚çº§è”æ‹†åˆ†

```bash
python csv_splitter.py split \
    --input ./data/sample.csv \
    --split-fields "çœä»½,åŸå¸‚"
```

è¾“å‡ºï¼š`sample_ä¸Šæµ·å¸‚_ä¸Šæµ·å¸‚.csv`ã€`sample_æµ™æ±Ÿçœ_æ­å·å¸‚.csv`...

## CLI å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|-----|------|-----|-------|------|
| `--input` | string | æ˜¯ | - | è¾“å…¥æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹è·¯å¾„ |
| `--split-fields` | string | å¦* | - | æ‹†åˆ†å­—æ®µï¼Œé€—å·åˆ†éš”ï¼ˆæŒ‰è¡Œæ•°æ‹†åˆ†æ—¶å¯é€‰ï¼‰|
| `--time-period` | string | å¦ | - | æ—¶é—´å‘¨æœŸï¼šY/H/Q/M/HM/Dï¼ˆä»…æ—¥æœŸå­—æ®µéœ€è¦ï¼‰|
| `--max-rows` | int | å¦ | None | å•æ–‡ä»¶æœ€å¤§è¡Œæ•°ï¼ˆ1-10000000ï¼‰ï¼ŒNone=ä¸æ‹†åˆ† |
| `--output` | string | å¦ | ./split_data | è¾“å‡ºç›®å½• |
| `--recursive` | bool | å¦ | False | æ˜¯å¦é€’å½’å¤„ç†å­æ–‡ä»¶å¤¹ |
| `--encoding` | string | å¦ | auto | æ–‡ä»¶ç¼–ç ï¼šauto/utf-8/gbk/gb2312 |

*æ³¨ï¼šæŒ‰è¡Œæ•°æ‹†åˆ†æ¨¡å¼ï¼ˆ`--split-fields` æœªæŒ‡å®šï¼‰æ—¶ï¼Œæ­¤å‚æ•°å¯é€‰

## é¡¹ç›®ç»“æ„

```
split_csv_by_field/
â”œâ”€â”€ src/                          # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ cli.py                    # CLI å…¥å£
â”‚   â”œâ”€â”€ gui/                      # GUI æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ core/                 # æ ¸å¿ƒå±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ app.py           # åº”ç”¨ç¨‹åºç±»
â”‚   â”‚   â”‚   â””â”€â”€ config.py        # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ pages/               # å„é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ base_page.py     # é¡µé¢åŸºç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ home_page.py     # é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ file_page.py     # æ–‡ä»¶é€‰æ‹©
â”‚   â”‚   â”‚   â”œâ”€â”€ field_page.py    # å­—æ®µé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ split_page.py    # æ‹†åˆ†è®¾ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ preview_page.py  # é¢„è§ˆç¡®è®¤
â”‚   â”‚   â”‚   â”œâ”€â”€ progress_page.py # æ‰§è¡Œè¿›åº¦
â”‚   â”‚   â”‚   â”œâ”€â”€ result_page.py   # ç»“æœå±•ç¤º
â”‚   â”‚   â”‚   â”œâ”€â”€ settings_page.py # è®¾ç½®
â”‚   â”‚   â”‚   â””â”€â”€ help_page.py     # å¸®åŠ©
â”‚   â”‚   â”œâ”€â”€ workers/             # å·¥ä½œçº¿ç¨‹
â”‚   â”‚   â”‚   â””â”€â”€ split_worker.py  # æ‹†åˆ†çº¿ç¨‹
â”‚   â”‚   â””â”€â”€ main_window.py       # ä¸»çª—å£
â”‚   â”œâ”€â”€ splitter/                # æ‹†åˆ†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ csv_splitter.py      # æ ¸å¿ƒæ‹†åˆ†ç±»
â”‚   â””â”€â”€ utils/                   # å·¥å…·æ¨¡å—
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ constants.py         # å¸¸é‡å®šä¹‰
â”‚       â”œâ”€â”€ date_utils.py        # æ—¥æœŸå·¥å…·
â”‚       â””â”€â”€ file_utils.py        # æ–‡ä»¶å·¥å…·
â”œâ”€â”€ gui_main.py                  # GUI å…¥å£æ–‡ä»¶
â”œâ”€â”€ csv_splitter.py              # CLI å…¥å£æ–‡ä»¶
â”œâ”€â”€ requirements.txt             # ä¾èµ–æ¸…å•
â”œâ”€â”€ README.md                    # æœ¬æ–‡ä»¶
â”œâ”€â”€ data/                        # ç¤ºä¾‹æ•°æ®
â”‚   â””â”€â”€ sample.csv               # è®¢å•æ•°æ®æ ·ä¾‹
â””â”€â”€ tests/                       # æµ‹è¯•ç›®å½•
    â”œâ”€â”€ test_date_utils.py
    â”œâ”€â”€ test_file_utils.py
    â””â”€â”€ test_csv_splitter.py
```

## GUI ä½¿ç”¨è¯´æ˜

### å¯åŠ¨ GUI

```bash
python gui_main.py
```

### æ“ä½œæµç¨‹

1. **æ–‡ä»¶é€‰æ‹©**
   - é€‰æ‹©å•ä¸ª CSV æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹
   - é€‰æ‹©æ‹†åˆ†ç±»å‹ï¼šæŒ‰å­—æ®µæ‹†åˆ† / æŒ‰è¡Œæ•°æ‹†åˆ†

2. **å­—æ®µé…ç½®**ï¼ˆä»…æŒ‰å­—æ®µæ‹†åˆ†æ¨¡å¼ï¼‰
   - è‡ªåŠ¨è¯†åˆ«æ—¥æœŸå­—æ®µï¼ˆæ ‡è®°ä¸º ğŸ“…ï¼‰
   - é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªæ‹†åˆ†å­—æ®µ
   - æ”¯æŒæ™ºèƒ½é€‰æ‹©ï¼ˆè‡ªåŠ¨é€‰ä¸­æ‰€æœ‰æ—¥æœŸå­—æ®µï¼‰

3. **æ‹†åˆ†è®¾ç½®**
   - **æœ‰æ—¥æœŸå­—æ®µæ—¶**ï¼šå¯è®¾ç½®æ—¶é—´å‘¨æœŸå’Œè¡Œæ•°é™åˆ¶
   - **æ— æ—¥æœŸå­—æ®µæ—¶**ï¼šåªèƒ½è®¾ç½®è¡Œæ•°é™åˆ¶
   - **æŒ‰è¡Œæ•°æ‹†åˆ†æ¨¡å¼**ï¼šåªè®¾ç½®è¡Œæ•°é™åˆ¶

4. **é¢„è§ˆç¡®è®¤**
   - æŸ¥çœ‹é…ç½®æ‘˜è¦
   - ç¡®è®¤æ–‡ä»¶ä¿¡æ¯å’Œæ‹†åˆ†ç­–ç•¥
   - ç‚¹å‡»"å¼€å§‹æ‹†åˆ†"æ‰§è¡Œ

5. **æŸ¥çœ‹ç»“æœ**
   - æŸ¥çœ‹æ‹†åˆ†ç»Ÿè®¡ï¼ˆæ–‡ä»¶æ•°ã€è¡Œæ•°ç­‰ï¼‰
   - æ‰“å¼€è¾“å‡ºç›®å½•
   - æŸ¥çœ‹æ‰§è¡Œæ—¥å¿—

## ç‰ˆæœ¬å†å²

### v2.2.0 (å½“å‰ç‰ˆæœ¬)
- ğŸ‰ æ–°å¢ PyQt6 å›¾å½¢ç•Œé¢ (GUI)
- âœ¨ æ–°å¢æŒ‰è¡Œæ•°æ‹†åˆ†æ¨¡å¼ï¼ˆæ— éœ€é€‰æ‹©å­—æ®µï¼‰
- âœ¨ æ™ºèƒ½å­—æ®µè¯†åˆ«ï¼ˆè‡ªåŠ¨æ£€æµ‹æ—¥æœŸå­—æ®µï¼‰
- âœ¨ åŠ¨æ€ UIï¼ˆæ ¹æ®é€‰æ‹©è‡ªåŠ¨æ˜¾ç¤º/éšè—ç›¸å…³é€‰é¡¹ï¼‰
- ğŸ› ä¿®å¤ç”¨æˆ·è¾“å…¥å€¼æŒä¹…åŒ–é—®é¢˜
- ğŸ› ä¿®å¤å°æ•°å€¼ï¼ˆ<1000ï¼‰æ— æ³•è¾“å…¥çš„é—®é¢˜

### v2.1
- æ–°å¢æ—¥æœŸæ ¼å¼æ”¯æŒï¼šyyyyMMã€yyyy-MMï¼ˆå¹´æœˆæ ¼å¼ï¼‰
- æ–°å¢æ—¥æœŸæ ¼å¼æ”¯æŒï¼šyyyy-M-dã€yyyy/M/dï¼ˆä¸è¡¥é›¶ï¼‰
- æ–°å¢æ—¥æœŸæ ¼å¼æ”¯æŒï¼šHH:mmï¼ˆæ— ç§’ï¼‰
- ä¿®å¤æ—¶é—´å‘¨æœŸå‚æ•°éªŒè¯é€»è¾‘
- é‡å‘½åä¸»ç¨‹åºä¸º csv_splitter.py

### v2.0
- æ¨¡å—åŒ–ä»£ç ç»“æ„
- æ–°å¢æ—¶é—´å‘¨æœŸï¼šåŠå¹´(H)ã€åŠæœˆ(HM)
- æ”¹è¿›é”™è¯¯å¤„ç†å’Œæ—¥å¿—è¾“å‡º

### V1.0
- å•æ–‡ä»¶ç‰ˆæœ¬å·²å¼ƒç”¨

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼
