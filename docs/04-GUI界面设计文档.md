# CSV 智能拆分工具 - PyQt6 桌面端界面设计文档

## 1. 设计概述

### 1.1 设计目标
- 简洁直观的用户界面
- 高效的操作流程
- 实时的进度反馈
- 友好的错误提示

### 1.2 技术栈
- **UI框架**：PyQt6
- **主题风格**：现代化扁平设计，类似 VS Code 风格
- **图标**：Lucide 或 Fluent UI 图标集
- **语言**：Python 3.10+

---

## 2. 整体界面布局

### 2.1 主窗口结构

```
┌─────────────────────────────────────────────────────────────────────────┐
│  CSV 智能拆分工具                                    │  ─  □  ×        │
├─────────────────────────────────────────────────────────────────────────┤
│  ┌─────────┐ ┌──────────────────────────────────────────────────────┐  │
│  │ 侧边栏   │ │                   主内容区                          │  │
│  │         │ │                                                    │  │
│  │ 📁文件   │ │  ┌──────────────────────────────────────────────┐  │  │
│  │ 📋字段   │ │  │              操作向导区                       │  │  │
│  │ ⚙️设置   │ │  │                                              │  │  │
│  │ 📊历史   │ │  └──────────────────────────────────────────────┘  │  │
│  │ ?帮助    │ │                                                    │  │
│  │         │ │  ┌──────────────────────────────────────────────┐  │  │
│  │         │ │  │              预览区                           │  │  │
│  │         │ │  │                                              │  │  │
│  │         │ │  │                                              │  │  │
│  │         │ │  └──────────────────────────────────────────────┘  │  │
│  └─────────┘ │                                                    │  │
│             │  ┌──────────────────────────────────────────────┐  │  │
│             │  │              进度/日志区                      │  │  │
│             │  └──────────────────────────────────────────────┘  │  │
└─────────────┴──────────────────────────────────────────────────────┴──┘
```

### 2.2 窗口尺寸规范

| 元素 | 尺寸 | 说明 |
|-----|------|------|
| 最小窗口尺寸 | 1000 × 700 | 保证内容完整显示 |
| 推荐窗口尺寸 | 1280 × 850 | 最佳体验尺寸 |
| 侧边栏宽度 | 200 | 固定宽度，可收起 |
| 底部日志区高度 | 150 | 可调整 |

---

## 3. 功能模块详细设计

### 3.1 侧边栏导航

```
┌──────────────┐
│              │
│  🏠 首页     │  ← 默认选中
│              │
├──────────────┤
│  📁 文件选择 │
│              │
├──────────────┤
│  📋 字段配置 │
│              │
├──────────────┤
│  ⚙️ 拆分设置 │
│              │
├──────────────┤
│  ▶️ 开始拆分 │
│              │
├──────────────┤
│  📊 拆分结果 │
│              │
├──────────────┤
│  📜 历史记录 │
│              │
├──────────────┤
│  ⚙️ 设置     │
│              │
├──────────────┤
│  ❓ 帮助     │
│              │
└──────────────┘
```

**交互说明**：
- 鼠标悬停：背景色加深
- 选中状态：左侧蓝色边框 + 浅蓝背景
- 禁用状态：灰色 + 不可点击
- 快捷键：Alt+1~9 切换页面

---

### 3.2 文件选择页面

```
┌─────────────────────────────────────────────────────────────────────────┐
│  📁 文件选择                                                  [步骤 1/4] │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  选择输入文件/文件夹                                              │   │
│  │                                                                  │   │
│  │  ┌────────────────────────────────────────────────────────────┐  │   │
│  │  │ 📄 C:\data\orders.csv                          [浏览]     │  │   │
│  │  └────────────────────────────────────────────────────────────┘  │   │
│  │                                                                  │   │
│  │  ☑ 包含子文件夹                                                 │   │
│  │  ☑ 自动检测文件编码                                            │   │
│  │                                                                  │   │
│  │  ┌────────────────────────────────────────────────────────────┐  │   │
│  │  │ 已选择 1 个文件，共 1,500,000 行                            │  │   │
│  │  │                                                            │  │   │
│  │  │ 📄 orders.csv                 1,500,000 行    utf-8       │  │   │
│  │  └────────────────────────────────────────────────────────────┘  │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  选择输出目录                                                     │   │
│  │                                                                  │   │
│  │  ┌────────────────────────────────────────────────────────────┐  │   │
│  │  │ 📁 C:\output\split_data                       [浏览]     │  │   │
│  │  └────────────────────────────────────────────────────────────┘  │   │
│  │                                                                  │   │
│  │  ☑ 输出前清空目录                                               │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│                    [上一步]    [下一步: 字段配置 →]                     │
└─────────────────────────────────────────────────────────────────────────┘
```

**组件说明**：

| 组件 | 类型 | 属性 |
|-----|------|------|
| 文件路径输入框 | QLineEdit | 占位符："选择文件或文件夹..." |
| 浏览按钮 | QPushButton | 图标 + 文字 |
| 包含子文件夹 | QCheckBox | 默认勾选 |
| 自动检测编码 | QCheckBox | 默认勾选 |
| 文件列表 | QTableWidget | 只读，可滚动 |
| 输出目录输入框 | QLineEdit | 同文件路径输入框 |
| 清空目录选项 | QCheckBox | 默认不勾选 |

---

### 3.3 字段配置页面

```
┌─────────────────────────────────────────────────────────────────────────┐
│  📋 字段配置                                                  [步骤 2/4] │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  📄 orders.csv 的字段列表                                         │   │
│  │                                                                  │   │
│  │  ┌────┬──────────────┬──────────┬──────────────────────────────┐ │   │
│  │  │#   │ 字段名        │ 类型     │ 样例值                      │ │   │
│  │  ├────┼──────────────┼──────────┼──────────────────────────────┤ │   │
│  │  │☑  │ 订单ID        │ 📝 普通  │ ORD202401150001             │ │   │
│  │  │☑  │ 省份          │ 📝 普通  │ 广东                        │ │   │
│  │  │☑  │ 城市          │ 📝 普通  │ 深圳                        │ │   │
│  │  │☑  │ 订单日期      │ 📅 日期  │ 2024/01/15                  │ │   │
│  │  │☐  │ 客户类型      │ 📝 普通  │ VIP                         │ │   │
│  │  │☐  │ 金额          │ 📝 普通  │ 299.5                       │ │   │
│  │  └────┴──────────────┴──────────┴──────────────────────────────┘ │   │
│  │                                                                  │   │
│  │  💡 提示：已自动识别日期字段（标记为 📅）                          │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  已选择的拆分字段（可拖拽排序）                                    │   │
│  │                                                                  │   │
│  │  ┌────────────────────────────────────────────────────────────┐  │   │
│  │  │ 省份                    ↑               [移除]              │  │   │
│  │  ├────────────────────────────────────────────────────────────┤  │   │
│  │  │ 城市                    ↑               [移除]              │  │   │
│  │  ├────────────────────────────────────────────────────────────┤  │   │
│  │  │ 订单日期 📅              ↑               [移除]              │  │   │
│  │  └────────────────────────────────────────────────────────────┘  │   │
│  │                                                                  │   │
│  │  💡 拆分顺序：省份 → 城市 → 订单日期                               │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│                    [上一步]    [下一步: 拆分设置 →]                     │
└─────────────────────────────────────────────────────────────────────────┘
```

**组件说明**：

| 组件 | 类型 | 功能 |
|-----|------|------|
| 字段列表表格 | QTableWidget | 显示所有字段，支持多选 |
| 复选框列 | QTableWidgetItem | 选择拆分字段 |
| 类型列 | QTableWidgetItem | 显示字段类型（日期/普通） |
| 样例值列 | QTableWidgetItem | 显示字段样例值 |
| 已选字段列表 | QListWidget | 显示已选字段，支持拖拽排序 |
| 上移按钮 | QPushButton | 调整字段优先级 |
| 下移按钮 | QPushButton | 调整字段优先级 |
| 移除按钮 | QPushButton | 移除已选字段 |

**交互逻辑**：
1. 双击表格行 → 添加到已选字段
2. 拖拽已选字段 → 调整拆分顺序
3. 日期字段自动标记 📅 图标
4. 支持全选/反选快捷键

---

### 3.4 拆分设置页面

```
┌─────────────────────────────────────────────────────────────────────────┐
│  ⚙️ 拆分设置                                                  [步骤 3/4] │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  时间周期设置                                                     │   │
│  │                                                                  │   │
│  │  检测到日期字段：订单日期                                          │   │
│  │                                                                  │   │
│  │  ┌────────────────────────────────────────────────────────────┐  │   │
│  │  │ 时间周期：                                               │  │   │
│  │  │                                                          │  │   │
│  │  │  ○ 年 (Y)                                                │  │   │
│  │  │  ○ 半年 (H)              ┌────────────────────────────┐  │  │   │
│  │  │  ○ 季度 (Q)             │ 2024-H1, 2024-H2          │  │   │   │
│  │  │  ● 月 (M)               │                          │  │  │   │
│  │  │  ○ 半月 (HM)            │                          │  │  │   │
│  │  │  ○ 日 (D)               │                          │  │  │   │
│  │  │                                                        │  │  │   │
│  │  │  📝 预览输出文件名：                                 │  │  │   │
│  │  │  orders_广东_深圳_2024-01.csv                        │  │  │   │
│  │  │  orders_广东_深圳_2024-02.csv                        │  │  │   │
│  │  │  ...                                                 │  │  │   │
│  │  └────────────────────────────────────────────────────┘  │  │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  大文件二次拆分设置                                               │   │
│  │                                                                  │   │
│  │  ☑ 启用按行数二次拆分                                             │   │
│  │                                                                  │   │
│  │  单文件最大行数：    [  500,000  ] 行                             │   │
│  │  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━          │   │
│  │  10万        50万        100万       200万                       │   │
│  │                                                                  │   │
│  │  💡 当拆分后的文件超过指定行数时，会自动拆分为多个文件            │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  其他设置                                                         │   │
│  │                                                                  │   │
│  │  文件编码：          [ UTF-8 with BOM ▼ ]                        │   │
│  │  文件名长度限制：   [ 100 ] 字符                                 │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│                    [上一步]    [下一步: 确认并开始 →]                   │
└─────────────────────────────────────────────────────────────────────────┘
```

**组件说明**：

| 组件 | 类型 | 功能 |
|-----|------|------|
| 时间周期单选框 | QRadioButton | 选择时间分组方式 |
| 预览框 | QTextEdit | 显示输出文件名示例 |
| 启用二次拆分 | QCheckBox | 控制是否启用行数拆分 |
| 行数滑块 | QSlider | 快速选择常用值 |
| 行数输入框 | QSpinBox | 精确输入行数 |
| 文件编码下拉框 | QComboBox | 选择输出编码 |
| 文件名长度限制 | QSpinBox | 设置文件名最大长度 |

---

### 3.5 确认并开始页面

```
┌─────────────────────────────────────────────────────────────────────────┐
│  ▶️ 确认并开始                                                [步骤 4/4] │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  📋 配置摘要                                                     │   │
│  │                                                                  │   │
│  │  输入文件：     orders.csv                                       │   │
│  │  输出目录：     C:\output\split_data                             │   │
│  │  拆分字段：     省份 → 城市 → 订单日期                            │   │
│  │  时间周期：     月 (M)                                           │   │
│  │  行数拆分：     启用 (500,000行/文件)                            │   │
│  │  文件编码：     UTF-8 with BOM                                   │   │
│  │                                                                  │   │
│  │  预计输出文件数：约 150 个                                        │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  📊 输出文件预览（前20个）                                        │   │
│  │                                                                  │   │
│  │  ┌────────────────────────────────────────────────────────────┐  │   │
│  │  │ orders_广东_深圳_2024-01.csv                    预计 ~50万行 │  │   │
│  │  │ orders_广东_深圳_2024-02.csv                    预计 ~30万行 │  │   │
│  │  │ orders_广东_广州_2024-01.csv                    预计 ~25万行 │  │   │
│  │  │ orders_广东_广州_2024-02.csv                    预计 ~20万行 │  │   │
│  │  │ ...                                                    │  │   │
│  │  └────────────────────────────────────────────────────────────┘  │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│                    [上一步]              [▶️ 开始拆分]                   │
│                                                   [保存配置]           │
└─────────────────────────────────────────────────────────────────────────┘
```

**开始后状态**：

```
┌─────────────────────────────────────────────────────────────────────────┐
│  ▶️ 正在拆分...                                               [步骤 4/4] │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  📊 拆分进度                                                     │   │
│  │                                                                  │   │
│  │  正在处理：orders.csv                                            │   │
│  │                                                                  │   │
│  │  总体进度：                                                       │   │
│  │  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━          │   │
│  │  45% │████████████████████░░░░░░░░░░░░░░░░░░░░░░░░░░│ 2/5 文件    │   │
│  │                                                                  │   │
│  │  当前文件：                                                       │   │
│  │  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━          │   │
│  │  78% │██████████████████████████████████████░░░░░░░░░│          │   │
│  │                                                                  │   │
│  │  ✅ 已完成：                                                     │   │
│  │  • orders_广东_深圳_2024-01.csv (50万行)                        │   │
│  │  • orders_广东_广州_2024-01.csv (25万行)                        │   │
│  │                                                                  │   │
│  │  ⏳ 处理中：                                                     │   │
│  │  • orders_浙江_杭州_2024-01.csv (正在写入... 39万/50万)         │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  📈 统计信息                                                     │   │
│  │                                                                  │   │
│  │  输入文件：1 个      总行数：1,500,000 行                         │   │
│  │  输出文件：2 个      已处理：1,170,000 行                         │   │
│  │  耗时：00:02:35                                                   │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│                                                          [⏸ 暂停]      │
│                                                          [⏹ 停止]      │
└─────────────────────────────────────────────────────────────────────────┘
```

---

### 3.6 拆分结果页面

```
┌─────────────────────────────────────────────────────────────────────────┐
│  📊 拆分完成                                                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  ✅ 拆分完成！                                                    │   │
│  │                                                                  │   │
│  │  输入文件：1 个      总行数：1,500,000 行                         │   │
│  │  输出文件：150 个    总耗时：00:05:23                             │   │
│  │  输出目录：C:\output\split_data                                   │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  📁 输出文件列表（双击打开文件所在位置）                            │   │
│  │                                                                  │   │
│  │  ┌────────────────────────────────────────────────────────────┐  │   │
│  │  │ 文件名                           大小       行数   操作     │  │   │
│  │  ├────────────────────────────────────────────────────────────┤  │   │
│  │  │ orders_广东_深圳_2024-01.csv        12.5 MB   50万   📂🗑️  │  │   │
│  │  │ orders_广东_深圳_2024-02.csv        8.3 MB    30万   📂🗑️  │  │   │
│  │  │ orders_广东_广州_2024-01.csv        6.8 MB    25万   📂🗑️  │  │   │
│  │  │ orders_广东_广州_2024-02.csv        5.2 MB    20万   📂🗑️  │  │   │
│  │  │ ...                                                      │  │   │
│  │  └────────────────────────────────────────────────────────────┘  │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│  [📂 打开输出目录]    [🔄 新建拆分任务]    [📋 导出报告]    [📜 保存配置]  │
└─────────────────────────────────────────────────────────────────────────┘
```

---

### 3.7 历史记录页面

```
┌─────────────────────────────────────────────────────────────────────────┐
│  📜 历史记录                                                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  搜索：[______________] 📅 日期筛选：[最近7天 ▼]  [刷新]          │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  ┌────────────────────────────────────────────────────────────┐  │   │
│  │  │ 时间          输入文件          输出文件数   状态    操作  │  │   │
│  │  ├────────────────────────────────────────────────────────────┤  │   │
│  │  │ 2024-01-15    orders.csv        150个       ✅成功  📋🔄  │  │   │
│  │  │ 14:30:25                                    🗑️           │  │   │
│  │  ├────────────────────────────────────────────────────────────┤  │   │
│  │  │ 2024-01-14    sales.csv         80个        ✅成功  📋🔄  │  │   │
│  │  │ 10:15:30                                    🗑️           │  │   │
│  │  ├────────────────────────────────────────────────────────────┤  │   │
│  │  │ 2024-01-13    data.csv          45个        ❌失败  📋🗑️  │  │   │
│  │  │ 09:20:15     错误：文件读取失败                          │  │   │
│  │  └────────────────────────────────────────────────────────────┘  │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│                                    [清空历史]              [导出历史]    │
└─────────────────────────────────────────────────────────────────────────┘
```

---

### 3.8 设置页面

```
┌─────────────────────────────────────────────────────────────────────────┐
│  ⚙️ 设置                                                                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  ┌──────┐ ┌────────────────────────────────────────────────────┐ │   │
│  │  │常规  │ │                                                      │ │   │
│  │  ├──────┤ │  默认输出目录：                                      │   │
│  │  │性能  │ │  [ C:\output                          [浏览]    ] │   │
│  │  ├──────┤ │                                                      │   │
│  │  │外观  │ │  默认文件编码：[ UTF-8 with BOM               ▼ ] │   │
│  │  ├──────┤ │                                                      │   │
│  │  │高级  │ │  ☑ 启动时检查更新                                    │   │
│  │  └──────┘ │  ☑ 最小化到托盘                                      │   │
│  │            │  ☑ 关闭前确认                                      │   │
│  │            │                                                      │   │
│  │            │  历史记录：最多保存 [ 100 ] 条                       │   │
│  │            │                                                      │   │
│  │            │  ┌───────┐                                          │   │
│  │            │  │ 恢复默认│                                          │   │
│  │            │  └───────┘                                          │   │
│  │            └────────────────────────────────────────────────────┘ │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│                                          [应用]          [确定]        │
└─────────────────────────────────────────────────────────────────────────┘
```

**设置分类**：

| 分类 | 设置项 |
|-----|--------|
| 常规 | 默认输出目录、文件编码、启动检查更新、最小化行为 |
| 性能 | 最大内存使用、线程数、缓存大小 |
| 外观 | 主题（浅色/深色/自动）、字体大小、界面语言 |
| 高级 | 日志级别、调试模式、开发者选项 |

---

### 3.9 帮助页面

```
┌─────────────────────────────────────────────────────────────────────────┐
│  ❓ 帮助                                                                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  ┌──────┐ ┌────────────────────────────────────────────────────┐ │   │
│  │  │快速  │ │                                                      │ │ │   │
│  │  │入门  │ │  📚 快速入门                                        │ │   │
│  │  ├──────┤ │                                                      │ │   │
│  │  │使用  │ │  1. 选择 CSV 文件或文件夹                            │ │   │
│  │  │指南  │ │  2. 勾选需要拆分的字段                               │ │   │
│  │  ├──────┤ │  3. 设置时间周期（如果选择了日期字段）                 │ │   │
│  │  │常见  │ │  4. 点击"开始拆分"                                    │ │   │
│  │  │问题  │ │                                                      │ │   │
│  │  ├──────┤ │  🎬 视频教程                                         │ │   │
│  │  │关于  │ │  [观看入门教程] [查看更多视频]                        │   │
│  │  └──────┘ │                                                      │ │   │
│  │            │  📖 使用手册                                         │ │   │
│  │            │  [在线文档] [下载PDF]                                │ │   │
│  │            │                                                      │ │   │
│  │            │  ❓ 常见问题                                         │ │   │
│  │            │  • 如何按月份拆分 CSV 文件？                         │ │   │
│  │            │  • 支持哪些日期格式？                                │ │   │
│  │            │  • 大文件如何处理？                                  │ │   │
│  │            │  [查看更多问题 →]                                    │ │   │
│  │            │                                                      │ │   │
│  │            │  🔗 有用的链接                                       │ │   │
│  │            │  • 官方网站: https://csv-splitter.example.com       │ │   │
│  │            │  • GitHub: https://github.com/example/csv-splitter  │ │   │
│  │            │  • 问题反馈: support@example.com                     │ │   │
│  │            └────────────────────────────────────────────────────┘ │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │  CSV 智能拆分工具                                                  │   │
│  │  版本：v2.0.0 (PyQt6 Desktop)                                     │   │
│  │  Python: 3.10+ | PyQt6: 6.6+                                      │   │
│  │  © 2024 CSV Splitter. All rights reserved.                        │   │
│  │                                                                  │   │
│  │  [查看许可协议]            [第三方库许可]                          │   │
│  └──────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 4. 通用UI组件设计

### 4.1 按钮样式

```
┌─────────────────────────────────────────────────────────────────────┐
│  主要按钮                            次要按钮                        │
│  ┌───────────────────┐                ┌───────────────────┐         │
│  │    ▶️ 开始拆分     │                │    取消           │         │
│  └───────────────────┘                └───────────────────┘         │
│  • 蓝色背景 #007ACC                                                     │
│  • 白色文字                                                              │
│  • 圆角 4px                                                             │
│  • 高度 36px                                                            │
│                                                                        │
│  ┌─────────────────────────────────────────────────────────────────┐  │
│  │ 图标按钮                                                          │  │
│  │  ┌───┐ ┌───┐ ┌───┐  ┌─────┐                                    │  │
│  │  │📂 │ │🔄 │ │🗑️ │  │ 📋  │                                    │  │
│  │  └───┘ └───┘ └───┘  └─────┘                                    │  │
│  │  32×32px                                              80×32px    │  │
│  └─────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
```

### 4.2 输入框样式

```
┌─────────────────────────────────────────────────────────────────────┐
│  标准输入框                                                           │
│  ┌─────────────────────────────────────────────────────────────┐    │
│  │ C:\data\orders.csv                                ×         │    │
│  └─────────────────────────────────────────────────────────────┘    │
│  • 边框 #E0E0E0                                                      │
│  • 聚焦边框 #007ACC                                                  │
│  • 高度 32px                                                         │
│  • 内边距 8px                                                        │
│                                                                        │
│  带浏览按钮的输入框                                                   │
│  ┌───────────────────────────────────────┐ ┌──────────┐            │
│  │ C:\data\orders.csv           ×       │ │  浏览...  │            │
│  └───────────────────────────────────────┘ └──────────┘            │
│                                                                        │
│  数字输入框                                                           │
│  ┌────────────────────┐  ┌──────────────────────────────────┐       │
│  │   500,000 行    ↑  │  │ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━     │       │
│  │                 ↓  │  │ 50万                             │       │
│  └────────────────────┘  └──────────────────────────────────┘       │
└─────────────────────────────────────────────────────────────────────┘
```

### 4.3 进度条样式

```
┌─────────────────────────────────────────────────────────────────────┐
│  标准进度条                                                           │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━            │
│  75% │███████████████████████████████████████░░░░░░░░│            │
│                                                                        │
│  带文字的进度条                                                       │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━            │
│  75% │███████████████████████████████████████░░░░░░░░│ 3/4 文件    │
│                                                                        │
│  分段进度条（总体+当前文件）                                          │
│  总体进度：                                                            │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━            │
│  45% │████████████████████░░░░░░░░░░░░░░░░░░░░░░░░░░│ 2/5 文件    │
│                                                                        │
│  当前文件：                                                            │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━            │
│  78% │██████████████████████████████████████░░░░░░░░░│            │
└─────────────────────────────────────────────────────────────────────┘
```

### 4.4 表格样式

```
┌─────────────────────────────────────────────────────────────────────┐
│  标准表格                                                             │
│  ┌────┬──────────────┬──────────┬──────────────────────────────┐    │
│  │#   │ 字段名        │ 类型     │ 样例值                      │    │
│  │────│──────────────│──────────│──────────────────────────────│    │
│  │☑  │ 订单ID        │ 📝 普通  │ ORD202401150001             │    │
│  │☑  │ 省份          │ 📝 普通  │ 广东                        │    │
│  │☑  │ 订单日期      │ 📅 日期  │ 2024/01/15                  │    │
│  └────┴──────────────┴──────────┴──────────────────────────────┘    │
│  • 表头背景 #F5F5F5                                                   │
│  • 交替行色 #FAFAFA                                                   │
│  • 选中行背景 #E3F2FD                                                │
│  • 悬停行背景 #F0F7FF                                                │
│  • 行高 32px                                                         │
└─────────────────────────────────────────────────────────────────────┘
```

### 4.5 卡片样式

```
┌─────────────────────────────────────────────────────────────────────┐
│  信息卡片                                                             │
│  ┌─────────────────────────────────────────────────────────────┐    │
│  │  📋 配置摘要                                                 │    │
│  │  ─────────────────────────────────────────────────────────  │    │
│  │  输入文件：     orders.csv                                   │    │
│  │  输出目录：     C:\output\split_data                         │    │
│  │  拆分字段：     省份 → 城市 → 订单日期                        │    │
│  │  时间周期：     月 (M)                                       │    │
│  │  行数拆分：     启用 (500,000行/文件)                        │    │
│  └─────────────────────────────────────────────────────────────┘    │
│  • 白色背景                                                          │
│  • 圆角 8px                                                         │
│  • 阴影 0 2px 8px rgba(0,0,0,0.1)                                  │
│  • 内边距 16px                                                       │
└─────────────────────────────────────────────────────────────────────┘
```

### 4.6 消息提示样式

```
┌─────────────────────────────────────────────────────────────────────┐
│  成功消息                                                             │
│  ┌─────────────────────────────────────────────────────────────┐    │
│  │  ✅ 拆分完成！                                              │    │
│  │  成功处理 1,500,000 行数据，生成 150 个文件                 │    │
│  └─────────────────────────────────────────────────────────────┘    │
│  • 绿色边框 #4CAF50                                                │
│  • 浅绿背景 #E8F5E9                                                │
│                                                                        │
│  错误消息                                                             │
│  ┌─────────────────────────────────────────────────────────────┐    │
│  │  ❌ 错误                                                    │    │
│  │  文件读取失败：orders.csv（编码检测失败）                   │    │
│  │  [重试] [忽略] [查看详情]                                   │    │
│  └─────────────────────────────────────────────────────────────┘    │
│  • 红色边框 #F44336                                                 │
│  • 浅红背景 #FFEBEE                                                 │
│                                                                        │
│  警告消息                                                             │
│  ┌─────────────────────────────────────────────────────────────┐    │
│  │  ⚠️  警告                                                  │    │
│  │  输出目录已存在，是否覆盖现有文件？                          │    │
│  │  [是，覆盖] [取消]                                          │    │
│  └─────────────────────────────────────────────────────────────┘    │
│  • 橙色边框 #FF9800                                                 │
│  • 浅橙背景 #FFF3E0                                                 │
└─────────────────────────────────────────────────────────────────────┘
```

### 4.7 对话框样式

```
┌─────────────────────────────────────────────────────────────────────┐
│  标准对话框                                                           │
│  ┌─────────────────────────────────────────────────────────────┐    │
│  │  确认开始拆分                                     ─  □  ×  │    │
│  ├─────────────────────────────────────────────────────────────┤    │
│  │                                                               │    │
│  │  确认要开始拆分吗？此操作可能需要几分钟时间。                  │    │
│  │                                                               │    │
│  │  • 输入文件：orders.csv                                       │    │
│  │  • 总行数：1,500,000 行                                       │    │
│  │  • 预计输出：150 个文件                                        │    │
│  │                                                               │    │
│  │              ☑ 不再显示此提示                                  │    │
│  │                                                               │    │
│  │  ┌─────────┐  ┌─────────┐                                     │    │
│  │  │  取消   │  │  确认   │                                     │    │
│  │  └─────────┘  └─────────┘                                     │    │
│  └─────────────────────────────────────────────────────────────┘    │
│  • 圆角 8px                                                         │
│  • 阴影 0 8px 32px rgba(0,0,0,0.2)                                 │
│  • 模态背景 50% 透明黑色                                             │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 5. 主题与色彩

### 5.1 浅色主题（默认）

```
┌─────────────────────────────────────────────────────────────────────┐
│  色彩定义                                                             │
├─────────────────────────────────────────────────────────────────────┤
│  • 主色：       #007ACC  - 蓝色（按钮、链接、高亮）                  │
│  • 成功色：     #4CAF50  - 绿色（成功消息、完成状态）                │
│  • 警告色：     #FF9800  - 橙色（警告消息）                         │
│  • 错误色：     #F44336  - 红色（错误消息、失败状态）                │
│  • 背景色：     #FFFFFF  - 白色（主背景）                          │
│  │             #F5F5F5  - 浅灰（次要背景、卡片）                  │
│  │             #FAFAFA  - 极浅灰（交替行色）                      │
│  • 边框色：     #E0E0E0  - 灰色（边框、分隔线）                    │
│  • 文字色：     #333333  - 深灰（主文字）                         │
│  │             #666666  - 中灰（次要文字）                        │
│  │             #999999  - 浅灰（禁用文字）                        │
│  • 侧边栏：     #2D2D30  - 深灰（侧边栏背景）                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 5.2 深色主题

```
┌─────────────────────────────────────────────────────────────────────┐
│  色彩定义                                                             │
├─────────────────────────────────────────────────────────────────────┤
│  • 主色：       #3A8DDE  - 亮蓝色（按钮、链接、高亮）               │
│  • 成功色：     #66BB6A  - 亮绿色                                  │
│  • 警告色：     #FFA726  - 亮橙色                                  │
│  • 错误色：     #EF5350  - 亮红色                                  │
│  • 背景色：     #1E1E1E  - 深灰（主背景）                          │
│  │             #252526  - 稍浅灰（次要背景、卡片）                │
│  │             #2D2D30  - 卡片边框                               │
│  • 边框色：     #3E3E42  - 灰色（边框、分隔线）                    │
│  • 文字色：     #CCCCCC  - 浅灰（主文字）                         │
│  │             #999999  - 中灰（次要文字）                        │
│  │             #666666  - 深灰（禁用文字）                        │
│  • 侧边栏：     #202020  - 更深灰（侧边栏背景）                    │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 6. 响应式设计

### 6.1 窗口大小适配

| 窗口宽度 | 侧边栏 | 主内容区 | 布局调整 |
|---------|--------|----------|---------|
| ≥1280px | 200px | 正常显示 | 完整布局 |
| 1024-1279px | 180px | 正常显示 | 侧边栏收起 |
| 768-1023px | 可收起 | 正常显示 | 侧边栏默认隐藏 |
| <768px | 隐藏 | 全屏 | 抽屉式导航 |

### 6.2 字体缩放

```
字体大小基准：
• 小：   12px (高密度屏幕)
• 标准： 14px (默认)
• 大：   16px (大屏幕)
• 超大： 18px (高DPI/辅助功能)
```

---

## 7. 交互流程设计

### 7.1 主流程

```
┌─────────────────────────────────────────────────────────────────────────┐
│  用户操作流程                                                           │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  启动程序                                                               │
│     │                                                                   │
│     ▼                                                                   │
│  ┌──────────┐                                                           │
│  │ 首页     │  ← 显示最近操作、快速入口                                │
│  └────┬─────┘                                                           │
│       │                                                                 │
│       ▼                                                                 │
│  ┌──────────┐                                                           │
│  │文件选择  │  ← 选择输入文件、输出目录                                 │
│  └────┬─────┘                                                           │
│       │                                                                 │
│       ▼                                                                 │
│  ┌──────────┐                                                           │
│  │字段配置  │  ← 选择拆分字段、调整顺序                                 │
│  └────┬─────┘                                                           │
│       │                                                                 │
│       ▼                                                                 │
│  ┌──────────┐                                                           │
│  │拆分设置  │  ← 配置时间周期、二次拆分等                               │
│  └────┬─────┘                                                           │
│       │                                                                 │
│       ▼                                                                 │
│  ┌──────────┐                                                           │
│  │确认并开始│  ← 预览配置、开始拆分                                     │
│  └────┬─────┘                                                           │
│       │                                                                 │
│       ▼                                                                 │
│  ┌──────────┐                                                           │
│  │拆分结果  │  ← 显示输出文件、统计信息                                 │
│  └──────────┘                                                           │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### 7.2 状态转换

```
┌─────────────────────────────────────────────────────────────────────────┐
│  应用状态机                                                             │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│    ┌─────┐                                                              │
│    │空闲 │                                                              │
│    └──┬──┘                                                              │
│       │                                                                 │
│       │ 开始操作                                                        │
│       ▼                                                                 │
│    ┌─────┐     输入完成      ┌─────┐     配置完成      ┌─────┐         │
│    │输入 │ ────────────────→ │配置 │ ────────────────→ │就绪 │         │
│    └─────┘                  └─────┘                  └──┬──┘         │
│       │                                                  │            │
│       │ 取消                                            │ 开始        │
│       └──────────────────────────────────────────────────┘            │
│                               │                                         │
│                               ▼                                         │
│                            ┌─────┐                                     │
│                            │处理 │ ──完成──→ 结果                      │
│                            │中   │                                     │
│                            └─────┘                                     │
│                               │                                         │
│                               │ 错误/取消                                │
│                               ▼                                         │
│                            ┌─────┐                                     │
│                            │空闲 │                                     │
│                            └─────┘                                     │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 8. 快捷键设计

### 8.1 全局快捷键

| 快捷键 | 功能 |
|-------|------|
| Ctrl+O | 打开文件 |
| Ctrl+S | 保存配置 |
| Ctrl+N | 新建任务 |
| Ctrl+, | 打开设置 |
| Ctrl+Q | 退出程序 |
| F1 | 打开帮助 |

### 8.2 导航快捷键

| 快捷键 | 功能 |
|-------|------|
| Alt+Home | 返回首页 |
| Alt+→ | 下一步 |
| Alt+← | 上一步 |
| Alt+1~9 | 切换侧边栏页面 |
| Ctrl+Tab | 切换到下一个页面 |

### 8.3 操作快捷键

| 快捷键 | 功能 |
|-------|------|
| Ctrl+A | 全选 |
| Ctrl+D | 取消全选 |
| Delete | 删除选中项 |
| F5 | 刷新 |
| Enter | 确认/执行 |
| Esc | 取消/关闭 |

---

## 9. 可访问性设计

### 9.1 键盘导航

- 所有交互元素支持 Tab 键导航
- 焦点可见（蓝色边框高亮）
- 支持方向键在列表中移动

### 9.2 屏幕阅读器

- 所有按钮有描述性标签
- 图标有文字说明
- 进度变化有语音提示

### 9.3 高对比度模式

```
高对比度配色：
• 主色：       #FFFF00  - 黄色
• 背景色：     #000000  - 黑色
• 文字色：     #FFFFFF  - 白色
• 边框色：     #FFFFFF  - 白色
```

---

## 10. 性能优化建议

### 10.1 界面响应

| 优化项 | 方案 |
|-------|------|
| 大文件预览 | 只显示前1000行 |
| 文件列表 | 虚拟滚动（按需加载） |
| 进度更新 | 限制刷新频率（100ms） |
| 长时间操作 | 使用后台线程，避免界面冻结 |

### 10.2 内存管理

- 及时释放已关闭页面的资源
- 大文件分块读取，不全部加载到内存
- 图片和图标使用共享实例

---

## 11. 技术实现建议

### 11.1 PyQt6 组件选择

| 功能 | 组件 | 说明 |
|-----|------|------|
| 主窗口 | QMainWindow | 标准主窗口框架 |
| 导航 | QListWidget | 侧边栏导航 |
| 文件选择 | QLineEdit + QPushButton | 自定义文件选择器 |
| 字段列表 | QTableWidget | 可多选表格 |
| 进度条 | QProgressBar | 标准进度条 |
| 卡片容器 | QFrame + QVBoxLayout | 自定义卡片组件 |

### 11.2 多线程处理

```python
# 建议的线程架构
主线程 (GUI)
    │
    ├─── 工作线程 (QThread) - CSV 处理
    │         │
    │         ├─── 文件读取
    │         ├─── 字段分析
    │         ├─── 数据拆分
    │         └─── 文件写入
    │
    └─── 信号/槽通信 (Signal/Slot)
              │
              └─── 进度更新到主线程
```

### 11.3 配置持久化

```python
# 使用 QSettings 存储配置
- 默认输出目录
- 历史记录
- 窗口大小和位置
- 主题选择
- 用户偏好设置
```

---

## 12. 开发计划

### 12.1 开发阶段

| 阶段 | 任务 | 优先级 |
|-----|------|--------|
| 1 | 搭建基础框架和主窗口 | P0 |
| 2 | 实现文件选择页面 | P0 |
| 3 | 实现字段配置页面 | P0 |
| 4 | 实现拆分设置页面 | P0 |
| 5 | 实现确认和执行功能 | P0 |
| 6 | 实现结果展示页面 | P1 |
| 7 | 实现历史记录功能 | P1 |
| 8 | 实现设置页面 | P2 |
| 9 | 实现帮助页面 | P2 |
| 10 | 主题切换功能 | P2 |
| 11 | 快捷键支持 | P3 |
| 12 | 可访问性优化 | P3 |

### 12.2 测试要点

| 测试类型 | 重点 |
|---------|------|
| 功能测试 | 各页面功能正常 |
| 性能测试 | 大文件处理流畅 |
| 兼容性测试 | Windows/macOS/Linux |
| UI测试 | 各种屏幕分辨率 |
| 可访问性测试 | 键盘导航、屏幕阅读器 |

---

## 13. 附录：界面布局示意代码

### 13.1 主窗口布局伪代码

```python
# 主窗口布局结构
MainWindow (QMainWindow)
├── MenuBar
│   ├── 文件
│   ├── 编辑
│   ├── 视图
│   └── 帮助
├── ToolBar
├── CentralWidget
│   └── Splitter (Horizontal)
│       ├── Sidebar (QFrame, 固定宽度200)
│       │   └── NavList (QListWidget)
│       └── ContentArea (QStackedWidget)
│           ├── HomePage
│           ├── FileSelectionPage
│           ├── FieldConfigPage
│           ├── SplitSettingsPage
│           ├── ConfirmPage
│           ├── ResultPage
│           ├── HistoryPage
│           ├── SettingsPage
│           └── HelpPage
├── StatusBar
└── DockWidgets (可选)
```

### 13.2 页面切换逻辑

```python
# 页面导航状态机
PageState = {
    'home': {
        'next': 'file_selection',
        'prev': None
    },
    'file_selection': {
        'next': 'field_config',
        'prev': 'home'
    },
    'field_config': {
        'next': 'split_settings',
        'prev': 'file_selection'
    },
    'split_settings': {
        'next': 'confirm',
        'prev': 'field_config'
    },
    'confirm': {
        'next': 'processing',  # 开始处理
        'prev': 'split_settings'
    },
    'processing': {
        'next': 'result',  # 处理完成
        'prev': None
    },
    'result': {
        'next': None,
        'prev': 'home'  # 新建任务
    }
}
```

---

**文档版本**：v1.0
**最后更新**：2024-01-15
**维护者**：CSV Splitter Team
